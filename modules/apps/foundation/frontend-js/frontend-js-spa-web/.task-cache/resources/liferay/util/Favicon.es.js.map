{"version":3,"sources":["/source/Favicon.es.js"],"names":[],"mappings":"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","sourcesContent":["'use strict';\n\nclass Favicon {\n\tconstructor(framesPaths) {\n\t\tthis.framesPaths = framesPaths;\n\t\tthis.head = document.getElementsByTagName('head')[0];\n\t\tthis.imagesPath = themeDisplay.getPathThemeImages();\n\t}\n\n\tchangeFavicon(iconURL) {\n\t\tif (iconURL && iconURL !== '') {\n\t\t\tvar newLink = document.createElement(\"link\");\n\n\t\t\tnewLink.type = \"image/x-icon\";\n\t\t\tnewLink.rel = \"icon\";\n\t\t\tnewLink.href = iconURL;\n\n\t\t\tthis.removeExistingFavicons();\n\n\t\t\tthis.head.appendChild(newLink);\n\t\t}\n\t}\n\n\tgetLink() {\n\t\tvar link = this.head.getElementsByTagName('link');\n\n\t\tfor (var l = link.length, i = (l - 1); i >= 0; i--) {\n\t\t\tif ((/(^|\\s)icon(\\s|$)/i).test(link[i].getAttribute('rel'))) {\n\t\t\t\treturn link[i];\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t}\n\n\tpreloadImages() {\n\t\tfor (var i = 1; i < this.framesPaths.length; i++) {\n\t\t\t(new Image()).src = this.imagesPath + this.framesPaths[i];\n\t\t}\n\t}\n\n\tremoveExistingFavicons() {\n\t\tvar links = this.head.getElementsByTagName(\"link\");\n\n\t\tfor (var i = 0; i < links.length; i++) {\n\t\t    if (/\\bicon\\b/i.test(links[i].getAttribute(\"rel\"))) {\n\t\t        this.head.removeChild(links[i]);\n\t\t    }\n\t\t}\n\t}\n\n\tstartAnimation() {\n\t\tvar instance = this;\n\t\tvar framesPaths = instance.framesPaths;\n\n\t\tif (framesPaths != null && framesPaths.length) {\n\t\t\tinstance.existingLink = instance.getLink();\n\t\t\tinstance.iconIndex = 0;\n\n\t\t\tif (instance.interval != null) {\n\t\t\t\tclearInterval(instance.interval);\n\t\t\t}\n\n\t\t\tinstance.interval = setInterval(function() {\n\t\t\t\tinstance.changeFavicon(instance.imagesPath + framesPaths[instance.iconIndex]);\n\n\t\t\t\tinstance.iconIndex++;\n\n\t\t\t\tif (instance.iconIndex == framesPaths.length) {\n\t\t\t\t\tinstance.iconIndex = 0;\n\t\t\t\t}\n\t\t\t}, 75);\n\t\t}\n\t}\n\n\tstopAnimation() {\n\t\tclearInterval(this.interval);\n\t\tthis.interval = null;\n\n\t\tthis.removeExistingFavicons();\n\n\t\tif (this.existingLink) {\n\t\t\tthis.head.appendChild(this.existingLink);\n\t\t}\n\t}\n}\n\nexport default Favicon;"]}